{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% load bootstrap5 bootstrap_icons %}

{% block title %}{{ album.title }}{% endblock title %}

{% block canonical_url %}{% url 'image' year=album.year album_slug=album.slug image_slug=start_file.slug %}{% endblock canonical_url %}

{% block content %}

<div id="gal-carousel">
	<div class="card" data-bs-permlink="{{ image_slug }}">
		<div class="">
			{% for file, next_file, prev_file in file_orders %}
				<div class="{% if file != start_file %}d-none{% endif %}">
					<div class="card-header" style="z-index: 100;">
						<nav aria-label="breadcrumb">
							<ol class="breadcrumb m-0">
								<li class="breadcrumb-item"><a class="link-offset link-offset-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover text-primary" href="{% url 'year' year=album.year  %}">{{ album.year }}</a></li>
								<li class="breadcrumb-item"><a class="link-offset link-offset-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover text-primary" id="albumlink" href="{% url 'album' year=album.year album_slug=album.slug %}">{{ album.title }}</a></li>
								<li class="breadcrumb-item active">
									{{ forloop.counter }} {% translate "af" %} {{ file_count }}
									{% if start_file.type == "I" %}
									<span class="hidden-xs">
										{% blocktranslate count c=file_count %}
										billede
										{% plural %}
										billeder
										{% endblocktranslate %}
									</span>{% endif %}
								</li>
							</ol>
						</nav>
					</div>
					<ul class="carousel m-0 p-0">
						{% if file.type == "I" %}
							<img class="d-block w-100" alt="{{ album.slug }}/{{ file.slug }}"
							{% if file != start_file %}data-bs-{% endif %}srcset=
								"{{ file.file.thumbnail.400x400.url }} 400w,
								{{ file.file.thumbnail.720x720.url }} 720w,
								{{ file.file.thumbnail.940x940.url }} 940w,
								{{ file.file.thumbnail.1140x1140.url }} 1140w,
								{{ file.file.thumbnail.2280x2280.url }} 2280w"
							{% if file != start_file %}data-bs-{% endif %}sizes="100vw"
							{% if file != start_file %}data-bs-src=
								"{{ file.file.thumbnail.720x720.url }}"
							src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
							{% else %}
							src="{{ file.file.thumbnail.720x720.url }}"
							{% endif %}
							title="{{ file.caption }}">
						{% endif %}
						{% if file_count > 1 %}
							<a href="{{ prev_file.slug }}#gal-carousel" class="carousel-control-prev gal-control gal-prev" rel="prev" type="button" style="z-index: 99;">
								<span class="carousel-control-prev-icon" aria-hidden="true"></span>
								<span class="visually-hidden">{% translate "Forrige" %}</span>
							</a>
							<a href="{{ next_file.slug }}#gal-carousel" class="carousel-control-next gal-control gal-next" rel="next" type="button">
								<span class="carousel-control-next-icon" aria-hidden="true"></span>
								<span class="visually-hidden">{% translate "NÃ¦ste" %}</span>
							</a>
						{% endif %}
					</ul>
					<div class="card-footer" style="z-index: 100;">
						<div class="row">
							<div class="col-auto hidden-xs me-auto">
								<p class="m-0">{{ start_file.date|default_if_none:"" }}</p>
							</div>
							<div class="col-auto hidden-xs">
								<a class="link-offset link-offset-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover text-primary" href="{{ start_file.file.url }}" download><i>{% bs_icon 'download' size='1.0em' %}</i> ({{ start_file.file.size|filesizeformat }})</a>
							</div>
						</div>
					</div>
				</div>
			{% endfor %}
		</div>
	</div>
</div>

{% endblock content %}
